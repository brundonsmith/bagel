
// TODO: Or error
export js func parseJson(str: string): JSON|Error<string> => {#
    try {
        return JSON.parse(str)
    } catch (e) {
        return { kind: ___ERROR_SYM, value: String(e) }
    }
#}

export js func stringifyJson(val: JSON, indentation: number): string => {#
    return JSON.stringify(val, x => typeof x === 'undefined' ? null : x, indentation)
#}

export type JSON =
    | {[string]: JSON}
    | JSON[]
    | string
    | number
    | boolean
    | nil